{"version":3,"sources":["views/ViewStyles.module.scss","components/Books/error.jpg","components/Toastify/Toastify.js","components/Books/BookDetails.jsx","views/BookDetailsView.jsx"],"names":["module","exports","notify","status","text","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","BookDetails","bookDetails","imgUrl","reserveData","title","genre","author","descr","src","errorImg","alt","name","BookDetailsView","getReserveBook","bookId","props","getBookDetails","books","find","book","id","Number","a","this","match","params","axios","get","data","className","s","section","Component","mapDispatch","connect","state"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,QAAU,4BAA4B,QAAU,4BAA4B,MAAQ,4B,gCCDvF,QAA0B,mC,8zrBCe1BC,G,MAZA,SAACC,EAAQC,GACtB,OAAOC,IAAM,GAAD,OAAIF,IAAT,UAAsBC,GAAQ,CACnCE,SAAU,YACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,O,2JCTC,SAASC,EAAT,GAAoD,IAA7BC,EAA4B,EAA5BA,YAC5BC,GADwD,EAAfC,YACDF,EAAxCC,QAAQE,EAAgCH,EAAhCG,MAAOC,EAAyBJ,EAAzBI,MAAOC,EAAkBL,EAAlBK,OAAQC,EAAUN,EAAVM,MAEtC,OACE,qCACa,mCAAVH,EACC,qBAAKI,IAAKC,IAAUC,IAAKN,IAEzB,qBAAKI,IAAKN,EAAQQ,IAAKN,IAEzB,6BAAKA,IACL,4BAAIC,IACHC,GAAU,yCAAYA,EAAOK,QAC9B,4BAAIJ,O,6CCLJK,E,4MAkBJC,eAAiB,SAAAC,GAAM,OACrB,EAAKC,MAAMC,eACTb,EAAYc,MAAMC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,KAAOC,OAAOP,Q,8FAnBtD,kCAAAQ,EAAA,6DACUR,EAAWS,KAAKR,MAAMS,MAAMC,OAA5BX,OACAE,EAAmBO,KAAKR,MAAxBC,eAFV,kBAK2BU,IAAMC,IAAN,sCACUb,EADV,oBAL3B,gBAKYc,EALZ,EAKYA,KAGRZ,EAAeY,GACfxC,YAAO,UAAW,2BATtB,kDAYImC,KAAKV,eAAeC,GACpB1B,YAAO,QAAS,4BAbpB,0D,0EAsBA,WAAU,IACA0B,EAAWS,KAAKR,MAAMS,MAAMC,OAA5BX,OACAb,EAAgBsB,KAAKR,MAArBd,YAER,OACE,mCACE,0BAAS4B,UAAWC,IAAEC,QAAtB,UACE,+CAAkBjB,KAClB,cAACd,EAAD,CAAaC,YAAaA,EAAaE,YAAaA,IACpD,cAAC,IAAD,CAAgB0B,UAAWC,IAAEvC,iB,GAhCTyC,aA+CxBC,EAAc,CAAEjB,oBAEPkB,uBAVE,SAAAC,GAAK,MAAK,CACzBlC,YAAakC,EAAMlB,MAAMhB,eASMgC,EAAlBC,CAA+BtB","file":"static/js/BookDetails.fc83ce4c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"ViewStyles_section__AuNei\",\"useList\":\"ViewStyles_useList__3vLRS\",\"toast\":\"ViewStyles_toast__3PgFy\"};","export default __webpack_public_path__ + \"static/media/error.42d26448.jpg\";","import { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst notify = (status, text) => {\n  return toast[`${status}`](`${text}`, {\n    position: 'top-right',\n    autoClose: 2000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n  });\n};\n\nexport default notify;\n","import errorImg from './error.jpg';\n\nexport default function BookDetails({ bookDetails, reserveData }) {\n  const { imgUrl, title, genre, author, descr } = bookDetails;\n\n  return (\n    <>\n      {title === 'Дагон' ? (\n        <img src={errorImg} alt={title} />\n      ) : (\n        <img src={imgUrl} alt={title} />\n      )}\n      <h2>{title}</h2>\n      <p>{genre}</p>\n      {author && <p>Author: {author.name}</p>}\n      <p>{descr}</p>\n    </>\n  );\n}\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { getBookDetails } from '../redux/books/actions';\nimport BookDetails from '../components/Books/BookDetails';\nimport reserveData from '../components/Books/reserveBooks.json';\nimport { ToastContainer } from 'react-toastify';\nimport notify from '../components/Toastify';\nimport s from './ViewStyles.module.scss';\n\nclass BookDetailsView extends Component {\n  async componentDidMount() {\n    const { bookId } = this.props.match.params;\n    const { getBookDetails } = this.props;\n\n    try {\n      const { data } = await axios.get(\n        `http://localhost:2222/books/${bookId}?_expand=author`,\n      );\n      getBookDetails(data);\n      notify('success', 'Successful downloading!');\n      // throw new Error(); // *\n    } catch (error) {\n      this.getReserveBook(bookId);\n      notify('error', 'Server is not available!');\n    }\n  }\n\n  getReserveBook = bookId =>\n    this.props.getBookDetails(\n      reserveData.books.find(book => book.id === Number(bookId)),\n    );\n\n  render() {\n    const { bookId } = this.props.match.params;\n    const { bookDetails } = this.props;\n\n    return (\n      <>\n        <section className={s.section}>\n          <h1>Book Details {bookId}</h1>\n          <BookDetails bookDetails={bookDetails} reserveData={reserveData} />\n          <ToastContainer className={s.toast} />\n        </section>\n      </>\n    );\n  }\n}\n\nconst mapState = state => ({\n  bookDetails: state.books.bookDetails,\n});\n\n// const mapDispatch = dispatch => ({\n//   getBookDetails: bookDetails => dispatch(getBookDetails(bookDetails)),\n// });\n\nconst mapDispatch = { getBookDetails };\n\nexport default connect(mapState, mapDispatch)(BookDetailsView);\n"],"sourceRoot":""}